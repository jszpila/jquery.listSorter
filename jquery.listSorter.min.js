$.fn.listSorter=function(){return this.each(function(){var a=$(this);$(a).children(".sortFilters").children("a").each(function(){$(this).click(function(c){c.preventDefault();var b=$(this);if(!$(b).hasClass("activeSortFilter")){$(b).parent().children("a").removeClass("activeSortFilter");$(b).addClass("activeSortFilter");$(b).parent().parent().children(".sortList").each(function(){$.fn.listSorter.SortList($(this),$(b).attr("data-SortByField"),$(b).attr("data-SortDirection"))})}})})})};$.fn.listSorter.SortList=function(a,e,b){var d=$(a).children("li").get();if(e==""){e="alpha"}a=$.fn.listSorter.RemoveClassesWithPrefix(a,"sort_");$(a).addClass("sort_"+e+"_"+b);d.sort(function(g,f){var i="",h="";if(e!="alpha"){i=$.trim($(g).attr(e));h=$.trim($(f).attr(e))}else{i=$.trim($(g).text().toLowerCase());h=$.trim($(f).text().toLowerCase())}return(i<h)?-1:(i>h)?1:(i==h)?1:0});if(b=="desc"){d.reverse()}for(var c=0;c<d.length;c++){d[c]=$.fn.listSorter.RemoveClassesWithPrefix(d[c],"sortRank_");if(e!="alpha"){$(d[c]).addClass("sortRank_"+e+"_"+$(d[c]).attr(e))}else{$(d[c]).addClass("sortRank_"+e+"_"+$(d[c]).text().substring(0,1).toUpperCase())}}$.each(d,function(f,g){a.append(g)})};$.fn.listSorter.RemoveClassesWithPrefix=function(b,a){var c=$(b).attr("class").split(/\s+/);$.each(c,function(d,e){if(e!=""&&e.substring(0,a.length)==a){$(b).removeClass(e)}});return b};